{"sliceID":2380766914947235936,"uses":[{"reference":{"otherSlice":2725721263499836903},"usedName":{"typeName":{"identifier":"NameInfoFlag"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"Bool"}},"qualification":null},{"reference":{"otherSlice":2694158817781932873},"usedName":{"typeName":{"identifier":"SockAddr"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"IO"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"typeName":{"identifier":"Maybe"}},"qualification":null},{"reference":{"otherSlice":385354865410578624},"usedName":{"typeName":{"identifier":"HostName"}},"qualification":null},{"reference":{"otherSlice":3565051758154240159},"usedName":{"typeName":{"identifier":"ServiceName"}},"qualification":null},{"reference":{"otherSlice":881119326870730711},"usedName":{"valueName":{"identifier":"withSocketsDo"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":"$"}},"qualification":null},{"reference":{"otherSlice":7557960979551972938},"usedName":{"valueName":{"identifier":"withCStringIf"}},"qualification":null},{"reference":{"otherSlice":4007078406654875083},"usedName":{"valueName":{"identifier":"withSockAddr"}},"qualification":null},{"reference":{"otherSlice":9141767317209366854},"usedName":{"valueName":{"identifier":"c_getnameinfo"}},"qualification":null},{"reference":{"builtinModule":"GHC.Real"},"usedName":{"valueName":{"identifier":"fromIntegral"}},"qualification":null},{"reference":{"otherSlice":2627394233383068762},"usedName":{"valueName":{"identifier":"packBits"}},"qualification":null},{"reference":{"otherSlice":7486792427658485593},"usedName":{"valueName":{"identifier":"niFlagMapping"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"liftM"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"constructorName":{"identifier":"Just"},"constructorTypeName":{"identifier":"Maybe"}},"qualification":null},{"reference":{"builtinModule":"Foreign.C.String"},"usedName":{"valueName":{"identifier":"peekCString"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"return"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"constructorName":{"identifier":"Nothing"},"constructorTypeName":{"identifier":"Maybe"}},"qualification":null},{"reference":{"otherSlice":4080278171125282943},"usedName":{"valueName":{"identifier":"gai_strerror"}},"qualification":null},{"reference":{"builtinModule":"GHC.IO.Exception"},"usedName":{"valueName":{"identifier":"ioError"}},"qualification":null},{"reference":{"builtinModule":"System.IO.Error"},"usedName":{"valueName":{"identifier":"ioeSetErrorString"}},"qualification":null},{"reference":{"builtinModule":"System.IO.Error"},"usedName":{"valueName":{"identifier":"mkIOError"}},"qualification":null},{"reference":{"builtinModule":"GHC.IO.Exception"},"usedName":{"constructorName":{"identifier":"NoSuchThing"},"constructorTypeName":{"identifier":"IOErrorType"}},"qualification":null}],"fragment":["getNameInfo ::\n            [NameInfoFlag] ->\n              Bool -> Bool -> SockAddr -> IO (Maybe HostName, Maybe ServiceName)","getNameInfo flags doHost doService addr\n  = withSocketsDo $\n      withCStringIf doHost (1025) $\n        \\ c_hostlen c_host ->\n          withCStringIf doService (32) $\n            \\ c_servlen c_serv ->\n              do withSockAddr addr $\n                   \\ ptr_addr sz ->\n                     do ret <- c_getnameinfo ptr_addr (fromIntegral sz) c_host c_hostlen\n                                 c_serv\n                                 c_servlen\n                                 (packBits niFlagMapping flags)\n                        case ret of\n                            0 -> do let peekIf doIf c_val\n                                          = if doIf then liftM Just $ peekCString c_val else\n                                              return Nothing\n                                    host <- peekIf doHost c_host\n                                    serv <- peekIf doService c_serv\n                                    return (host, serv)\n                            _ -> do err <- gai_strerror ret\n                                    ioError\n                                      (ioeSetErrorString\n                                         (mkIOError NoSuchThing \"Network.Socket.getNameInfo\" Nothing\n                                            Nothing)\n                                         err)"],"instances":[],"language":{"extensions":["DeriveDataTypeable","ForeignFunctionInterface","TypeSynonymInstances","ScopedTypeVariables","MultiParamTypeClasses","NondecreasingIndentation","ExplicitForAll","PatternGuards"]}}