{"sliceID":8944005738322382924,"uses":[{"reference":{"otherSlice":804963839921609512},"usedName":{"constructorName":{"identifier":"LoggerSet"},"constructorTypeName":{"identifier":"LoggerSet"}},"qualification":null},{"reference":{"builtinModule":"GHC.Arr"},"usedName":{"valueName":{"identifier":"bounds"}},"qualification":null},{"reference":{"builtinModule":"GHC.IORef"},"usedName":{"valueName":{"identifier":"readIORef"}},"qualification":null},{"reference":{"builtinModule":"Data.Foldable"},"usedName":{"valueName":{"identifier":"mapM_"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"when"}},"qualification":null},{"reference":{"builtinModule":"Data.Maybe"},"usedName":{"valueName":{"identifier":"isJust"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":"$"}},"qualification":null},{"reference":{"otherSlice":5489264501767306365},"usedName":{"valueName":{"identifier":"closeFD"}},"qualification":null},{"reference":{"otherSlice":5033573139318186159},"usedName":{"valueName":{"identifier":"flushLog"}},"qualification":null},{"reference":{"builtinModule":"GHC.Arr"},"usedName":{"valueName":{"operator":"!"}},"qualification":null},{"reference":{"otherSlice":4888033921282857286},"usedName":{"constructorName":{"identifier":"Logger"},"constructorTypeName":{"identifier":"Logger"}},"qualification":null},{"reference":{"builtinModule":"GHC.MVar"},"usedName":{"valueName":{"identifier":"takeMVar"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":">>="}},"qualification":null},{"reference":{"otherSlice":6053711778951347528},"usedName":{"valueName":{"identifier":"freeBuffer"}},"qualification":null},{"reference":{"otherSlice":804963839921609512},"usedName":{"typeName":{"identifier":"LoggerSet"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"IO"}},"qualification":null}],"fragment":["rmLoggerSet :: LoggerSet -> IO ()","rmLoggerSet (LoggerSet mfile fref arr _)\n  = do let (l, u) = bounds arr\n       fd <- readIORef fref\n       let nums = [l .. u]\n       mapM_ (flushIt fd) nums\n       mapM_ freeIt nums\n       when (isJust mfile) $ closeFD fd\n  where flushIt fd i = flushLog fd (arr ! i)\n        freeIt i\n          = do let (Logger mbuf _ _) = arr ! i\n               takeMVar mbuf >>= freeBuffer"],"instances":[],"language":{"extensions":["OverloadedStrings","MultiParamTypeClasses","NondecreasingIndentation","ExplicitForAll","PatternGuards"]}}