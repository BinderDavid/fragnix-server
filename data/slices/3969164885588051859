{"sliceID":3969164885588051859,"uses":[{"reference":{"otherSlice":5590898605528085631},"usedName":{"valueName":{"identifier":"newBufferPool"}},"qualification":null},{"reference":{"otherSlice":5005571990657968709},"usedName":{"valueName":{"identifier":"allocateBuffer"}},"qualification":null},{"reference":{"otherSlice":4671951979797237699},"usedName":{"valueName":{"identifier":"bufferSize"}},"qualification":null},{"reference":{"otherSlice":8221855570296232207},"usedName":{"valueName":{"identifier":"sendAll"}},"qualification":"Sock"},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"return"}},"qualification":null},{"reference":{"otherSlice":2455091088557061440},"usedName":{"constructorName":{"identifier":"Connection"},"constructorTypeName":{"identifier":"Connection"}},"qualification":null},{"reference":{"otherSlice":2455091088557061440},"usedName":{"valueName":{"identifier":"connSendMany"}},"qualification":null},{"reference":{"otherSlice":403676164667661984},"usedName":{"valueName":{"identifier":"sendMany"}},"qualification":"Sock"},{"reference":{"otherSlice":2455091088557061440},"usedName":{"valueName":{"identifier":"connSendAll"}},"qualification":null},{"reference":{"otherSlice":2455091088557061440},"usedName":{"valueName":{"identifier":"connSendFile"}},"qualification":null},{"reference":{"otherSlice":8206228987722581002},"usedName":{"valueName":{"identifier":"sendFile"}},"qualification":null},{"reference":{"otherSlice":2455091088557061440},"usedName":{"valueName":{"identifier":"connClose"}},"qualification":null},{"reference":{"otherSlice":4456032333110337922},"usedName":{"valueName":{"identifier":"close"}},"qualification":null},{"reference":{"otherSlice":2455091088557061440},"usedName":{"valueName":{"identifier":"connFree"}},"qualification":null},{"reference":{"otherSlice":5280468568906222742},"usedName":{"valueName":{"identifier":"freeBuffer"}},"qualification":null},{"reference":{"otherSlice":2455091088557061440},"usedName":{"valueName":{"identifier":"connRecv"}},"qualification":null},{"reference":{"otherSlice":57549553376078425},"usedName":{"valueName":{"identifier":"receive"}},"qualification":null},{"reference":{"otherSlice":2455091088557061440},"usedName":{"valueName":{"identifier":"connRecvBuf"}},"qualification":null},{"reference":{"otherSlice":6960899083895393160},"usedName":{"valueName":{"identifier":"receiveBuf"}},"qualification":null},{"reference":{"otherSlice":2455091088557061440},"usedName":{"valueName":{"identifier":"connWriteBuffer"}},"qualification":null},{"reference":{"otherSlice":2455091088557061440},"usedName":{"valueName":{"identifier":"connBufferSize"}},"qualification":null},{"reference":{"otherSlice":2347089666054590766},"usedName":{"typeName":{"identifier":"Socket"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"IO"}},"qualification":null},{"reference":{"otherSlice":2455091088557061440},"usedName":{"typeName":{"identifier":"Connection"}},"qualification":null}],"fragment":["socketConnection :: Socket -> IO Connection","socketConnection s\n  = do bufferPool <- newBufferPool\n       writeBuf <- allocateBuffer bufferSize\n       let sendall = Sock.sendAll s\n       return\n         Connection{connSendMany = Sock.sendMany s, connSendAll = sendall,\n                    connSendFile = sendFile s writeBuf bufferSize sendall,\n                    connClose = close s, connFree = freeBuffer writeBuf,\n                    connRecv = receive s bufferPool, connRecvBuf = receiveBuf s,\n                    connWriteBuffer = writeBuf, connBufferSize = bufferSize}"],"instances":[],"language":{"extensions":["BangPatterns","OverloadedStrings","PackageImports","PatternGuards","ScopedTypeVariables","TupleSections","MultiParamTypeClasses","NondecreasingIndentation","ExplicitForAll"]}}