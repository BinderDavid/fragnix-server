{"sliceID":9215569047222169733,"uses":[{"reference":{"otherSlice":7471038449729235448},"usedName":{"valueName":{"identifier":"settingsInstallShutdownHandler"}},"qualification":null},{"reference":{"otherSlice":8454907147803785481},"usedName":{"valueName":{"identifier":"runSettingsConnection"}},"qualification":null},{"reference":{"otherSlice":3234431906652785900},"usedName":{"valueName":{"identifier":"accept"}},"qualification":null},{"reference":{"otherSlice":5496570086771819105},"usedName":{"valueName":{"identifier":"setSocketCloseOnExec"}},"qualification":null},{"reference":{"otherSlice":8056330025569894447},"usedName":{"valueName":{"identifier":"setSocketOption"}},"qualification":null},{"reference":{"otherSlice":6674542350474729315},"usedName":{"constructorName":{"identifier":"NoDelay"},"constructorTypeName":{"identifier":"SocketOption"}},"qualification":null},{"reference":{"builtinModule":"Control.Exception.Base"},"usedName":{"valueName":{"identifier":"catch"}},"qualification":"E"},{"reference":{"builtinModule":"GHC.Exception"},"usedName":{"constructorName":{"identifier":"SomeException"},"constructorTypeName":{"identifier":"SomeException"}},"qualification":"E"},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"return"}},"qualification":null},{"reference":{"otherSlice":3969164885588051859},"usedName":{"valueName":{"identifier":"socketConnection"}},"qualification":null},{"reference":{"otherSlice":4456032333110337922},"usedName":{"valueName":{"identifier":"close"}},"qualification":null},{"reference":{"otherSlice":7471038449729235448},"usedName":{"typeName":{"identifier":"Settings"}},"qualification":null},{"reference":{"otherSlice":2347089666054590766},"usedName":{"typeName":{"identifier":"Socket"}},"qualification":null},{"reference":{"otherSlice":628686228066488211},"usedName":{"typeName":{"identifier":"Application"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"IO"}},"qualification":null}],"fragment":["runSettingsSocket :: Settings -> Socket -> Application -> IO ()","runSettingsSocket set socket app\n  = do settingsInstallShutdownHandler set closeListenSocket\n       runSettingsConnection set getConn app\n  where getConn\n          = do (s, sa) <- accept socket\n               setSocketCloseOnExec s\n               setSocketOption s NoDelay 1 `E.catch`\n                 \\ (E.SomeException _) -> return ()\n               conn <- socketConnection s\n               return (conn, sa)\n        closeListenSocket = close socket"],"instances":[],"language":{"extensions":["BangPatterns","OverloadedStrings","PackageImports","PatternGuards","ScopedTypeVariables","TupleSections","MultiParamTypeClasses","NondecreasingIndentation","ExplicitForAll"]}}