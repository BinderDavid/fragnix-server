{"sliceID":565983337707137483,"uses":[{"reference":{"otherSlice":1260774520666980332},"usedName":{"constructorName":{"identifier":"ServerSettingsUnix"},"constructorTypeName":{"identifier":"ServerSettingsUnix"}},"qualification":null},{"reference":{"builtinModule":"Control.Exception.Base"},"usedName":{"valueName":{"identifier":"bracket"}},"qualification":"E"},{"reference":{"otherSlice":7443260752439456396},"usedName":{"valueName":{"identifier":"bindPath"}},"qualification":null},{"reference":{"otherSlice":4456032333110337922},"usedName":{"valueName":{"identifier":"close"}},"qualification":"NS"},{"reference":{"builtinModule":"Control.Monad"},"usedName":{"valueName":{"identifier":"forever"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":"$"}},"qualification":null},{"reference":{"builtinModule":"Control.Exception.Base"},"usedName":{"valueName":{"identifier":"bracketOnError"}},"qualification":"E"},{"reference":{"otherSlice":8252613548219038471},"usedName":{"valueName":{"identifier":"acceptSafe"}},"qualification":null},{"reference":{"otherSlice":8827895572598012404},"usedName":{"constructorName":{"identifier":"AppDataUnix"},"constructorTypeName":{"identifier":"AppDataUnix"}},"qualification":null},{"reference":{"otherSlice":8827895572598012404},"usedName":{"valueName":{"identifier":"appReadUnix"}},"qualification":null},{"reference":{"otherSlice":6365348551587089592},"usedName":{"valueName":{"identifier":"safeRecv"}},"qualification":null},{"reference":{"otherSlice":8827895572598012404},"usedName":{"valueName":{"identifier":"appWriteUnix"}},"qualification":null},{"reference":{"otherSlice":8221855570296232207},"usedName":{"valueName":{"identifier":"sendAll"}},"qualification":null},{"reference":{"builtinModule":"GHC.IO"},"usedName":{"valueName":{"identifier":"mask"}},"qualification":"E"},{"reference":{"builtinModule":"GHC.Conc.Sync"},"usedName":{"valueName":{"identifier":"forkIO"}},"qualification":null},{"reference":{"builtinModule":"Control.Exception.Base"},"usedName":{"valueName":{"identifier":"finally"}},"qualification":"E"},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"return"}},"qualification":null},{"reference":{"otherSlice":1260774520666980332},"usedName":{"typeName":{"identifier":"ServerSettingsUnix"}},"qualification":null},{"reference":{"otherSlice":8827895572598012404},"usedName":{"typeName":{"identifier":"AppDataUnix"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"IO"}},"qualification":null}],"fragment":["runUnixServer ::\n              ServerSettingsUnix -> (AppDataUnix -> IO ()) -> IO a","runUnixServer (ServerSettingsUnix path afterBind readBufferSize)\n  app\n  = E.bracket (bindPath path) NS.close\n      (\\ socket ->\n         do afterBind socket\n            forever $ serve socket)\n  where serve lsocket\n          = E.bracketOnError (acceptSafe lsocket)\n              (\\ (socket, _) -> NS.close socket)\n              $\n              \\ (socket, _) ->\n                do let ad\n                         = AppDataUnix{appReadUnix = safeRecv socket readBufferSize,\n                                       appWriteUnix = sendAll socket}\n                   _ <- E.mask $\n                          \\ restore -> forkIO $ restore (app ad) `E.finally` NS.close socket\n                   return ()"],"instances":[],"language":{"extensions":["ScopedTypeVariables","BangPatterns","MultiParamTypeClasses","NondecreasingIndentation","ExplicitForAll","PatternGuards"]}}