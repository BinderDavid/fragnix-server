{"sliceID":1336185421260678518,"uses":[{"reference":{"otherSlice":2981234607007717022},"usedName":{"valueName":{"identifier":"runBuilder"}},"qualification":null},{"reference":{"otherSlice":7564022038032245664},"usedName":{"typeName":{"identifier":"BufferWriter"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"IO"}},"qualification":null},{"reference":{"builtinModule":"Foreign.ForeignPtr"},"usedName":{"valueName":{"identifier":"withForeignPtr"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"flip"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"when"}},"qualification":null},{"reference":{"builtinModule":"GHC.Classes"},"usedName":{"valueName":{"operator":">"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":"$!"}},"qualification":null},{"reference":{"otherSlice":4942888801223460576},"usedName":{"constructorName":{"identifier":"PS"},"constructorTypeName":{"identifier":"ByteString"}},"qualification":null},{"reference":{"otherSlice":7564022038032245664},"usedName":{"constructorName":{"identifier":"Done"},"constructorTypeName":{"identifier":"Next"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"return"}},"qualification":null},{"reference":{"otherSlice":7564022038032245664},"usedName":{"constructorName":{"identifier":"More"},"constructorTypeName":{"identifier":"Next"}},"qualification":null},{"reference":{"otherSlice":5831756764704217508},"usedName":{"valueName":{"identifier":"mallocByteString"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"otherwise"}},"qualification":null},{"reference":{"otherSlice":7564022038032245664},"usedName":{"constructorName":{"identifier":"Chunk"},"constructorTypeName":{"identifier":"Next"}},"qualification":null},{"reference":{"builtinModule":"Control.Monad"},"usedName":{"valueName":{"identifier":"unless"}},"qualification":null},{"reference":{"otherSlice":5578418172209195165},"usedName":{"valueName":{"identifier":"null"}},"qualification":"S"},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"Int"}},"qualification":null},{"reference":{"otherSlice":4942888801223460576},"usedName":{"typeName":{"identifier":"ByteString"}},"qualification":null},{"reference":{"otherSlice":8984783929342293342},"usedName":{"typeName":{"identifier":"Builder"}},"qualification":null},{"reference":{"builtinModule":"GHC.ForeignPtr"},"usedName":{"typeName":{"identifier":"ForeignPtr"}},"qualification":null},{"reference":{"builtinModule":"GHC.Word"},"usedName":{"typeName":{"identifier":"Word8"}},"qualification":null}],"fragment":["toByteStringIOWithBuffer ::\n                         Int ->\n                           (ByteString -> IO ()) -> Builder -> ForeignPtr Word8 -> IO ()","toByteStringIOWithBuffer initBufSize io b initBuf\n  = do go initBufSize initBuf (runBuilder b)\n  where go bufSize buf = loop\n          where loop :: BufferWriter -> IO ()\n                loop wr\n                  = do (len, next) <- withForeignPtr buf (flip wr bufSize)\n                       when (len > 0) (io $! PS buf 0 len)\n                       case next of\n                           Done -> return ()\n                           More newBufSize nextWr | newBufSize > bufSize ->\n                                                    do newBuf <- mallocByteString newBufSize\n                                                       go newBufSize newBuf nextWr\n                                                  | otherwise -> loop nextWr\n                           Chunk s nextWr -> do unless (S.null s) (io s)\n                                                loop nextWr"],"instances":[],"language":{"extensions":["FlexibleContexts","BangPatterns","RankNTypes","MultiParamTypeClasses","NondecreasingIndentation","ExplicitForAll","PatternGuards"]}}