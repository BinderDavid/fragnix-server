{"sliceID":821347947759191931,"uses":[{"reference":{"builtinModule":"Control.Exception.Base"},"usedName":{"valueName":{"identifier":"handle"}},"qualification":"E"},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":"$"}},"qualification":null},{"reference":{"builtinModule":"GHC.IORef"},"usedName":{"valueName":{"identifier":"readIORef"}},"qualification":null},{"reference":{"otherSlice":6748536204600881803},"usedName":{"valueName":{"identifier":"spell"}},"qualification":null},{"reference":{"builtinModule":"GHC.IORef"},"usedName":{"valueName":{"identifier":"writeIORef"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"return"}},"qualification":null},{"reference":{"builtinModule":"GHC.Exception"},"usedName":{"typeName":{"identifier":"SomeException"}},"qualification":"E"},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"IO"}},"qualification":null},{"reference":{"otherSlice":4942888801223460576},"usedName":{"typeName":{"identifier":"ByteString"}},"qualification":null},{"reference":{"builtinModule":"GHC.IORef"},"usedName":{"typeName":{"identifier":"IORef"}},"qualification":null},{"reference":{"otherSlice":9124103446665558349},"usedName":{"typeName":{"identifier":"Recv"}},"qualification":null},{"reference":{"otherSlice":2257285051678168920},"usedName":{"typeName":{"identifier":"RecvBuf"}},"qualification":null},{"reference":{"otherSlice":4569852275802132727},"usedName":{"typeName":{"identifier":"BufSize"}},"qualification":null}],"fragment":["receiveN ::\n         IORef ByteString -> Recv -> RecvBuf -> BufSize -> IO ByteString","receiveN ref recv recvBuf size\n  = E.handle handler $\n      do cached <- readIORef ref\n         (bs, leftover) <- spell cached size recv recvBuf\n         writeIORef ref leftover\n         return bs\n  where handler :: E.SomeException -> IO ByteString\n        handler _ = return \"\""],"instances":[],"language":{"extensions":["ForeignFunctionInterface","OverloadedStrings","MultiParamTypeClasses","NondecreasingIndentation","ExplicitForAll","PatternGuards"]}}