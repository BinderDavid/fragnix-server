{"sliceID":5945336299892296940,"uses":[{"reference":{"otherSlice":5965689882024213187},"usedName":{"constructorName":{"identifier":"Acquire"},"constructorTypeName":{"identifier":"Acquire"}},"qualification":null},{"reference":{"otherSlice":87473710531740042},"usedName":{"valueName":{"identifier":"control"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":"$"}},"qualification":null},{"reference":{"otherSlice":7371661516282571116},"usedName":{"valueName":{"identifier":"mask"}},"qualification":"E"},{"reference":{"otherSlice":3880787913851784560},"usedName":{"constructorName":{"identifier":"Allocated"},"constructorTypeName":{"identifier":"Allocated"}},"qualification":null},{"reference":{"otherSlice":2236955037050727523},"usedName":{"valueName":{"identifier":"onException"}},"qualification":"E"},{"reference":{"otherSlice":41927180059319408},"usedName":{"constructorName":{"identifier":"ReleaseException"},"constructorTypeName":{"identifier":"ReleaseType"}},"qualification":null},{"reference":{"otherSlice":41927180059319408},"usedName":{"constructorName":{"identifier":"ReleaseNormal"},"constructorTypeName":{"identifier":"ReleaseType"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"return"}},"qualification":null},{"reference":{"otherSlice":3706295977478673008},"usedName":{"typeName":{"identifier":"MonadBaseControl"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"IO"}},"qualification":null},{"reference":{"otherSlice":5965689882024213187},"usedName":{"typeName":{"identifier":"Acquire"}},"qualification":null}],"fragment":["with :: MonadBaseControl IO m => Acquire a -> (a -> m b) -> m b","with (Acquire f) g\n  = control $\n      \\ run ->\n        E.mask $\n          \\ restore ->\n            do Allocated x free <- f restore\n               res <- restore (run (g x)) `E.onException` free ReleaseException\n               free ReleaseNormal\n               return res"],"instances":[],"language":{"extensions":["RankNTypes","MultiParamTypeClasses","DeriveDataTypeable","FlexibleContexts","NondecreasingIndentation","ExplicitForAll","PatternGuards"]}}