{"sliceID":5636554354526120224,"uses":[{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"return"}},"qualification":null},{"reference":{"otherSlice":2150836866812832620},"usedName":{"constructorName":{"identifier":"Request"},"constructorTypeName":{"identifier":"Request"}},"qualification":null},{"reference":{"otherSlice":2150836866812832620},"usedName":{"valueName":{"identifier":"requestMethod"}},"qualification":null},{"reference":{"otherSlice":2150836866812832620},"usedName":{"valueName":{"identifier":"httpVersion"}},"qualification":null},{"reference":{"otherSlice":5318969571062873184},"usedName":{"valueName":{"identifier":"http2ver"}},"qualification":null},{"reference":{"otherSlice":2150836866812832620},"usedName":{"valueName":{"identifier":"rawPathInfo"}},"qualification":null},{"reference":{"otherSlice":2150836866812832620},"usedName":{"valueName":{"identifier":"pathInfo"}},"qualification":null},{"reference":{"otherSlice":3579314455847880429},"usedName":{"valueName":{"identifier":"decodePathSegments"}},"qualification":"H"},{"reference":{"otherSlice":2150836866812832620},"usedName":{"valueName":{"identifier":"rawQueryString"}},"qualification":null},{"reference":{"otherSlice":2150836866812832620},"usedName":{"valueName":{"identifier":"queryString"}},"qualification":null},{"reference":{"otherSlice":3133621383246103626},"usedName":{"valueName":{"identifier":"parseQuery"}},"qualification":"H"},{"reference":{"otherSlice":2150836866812832620},"usedName":{"valueName":{"identifier":"requestHeaders"}},"qualification":null},{"reference":{"otherSlice":2150836866812832620},"usedName":{"valueName":{"identifier":"isSecure"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"constructorName":{"identifier":"True"},"constructorTypeName":{"identifier":"Bool"}},"qualification":null},{"reference":{"otherSlice":2150836866812832620},"usedName":{"valueName":{"identifier":"remoteHost"}},"qualification":null},{"reference":{"otherSlice":2150836866812832620},"usedName":{"valueName":{"identifier":"requestBody"}},"qualification":null},{"reference":{"otherSlice":2150836866812832620},"usedName":{"valueName":{"identifier":"vault"}},"qualification":null},{"reference":{"otherSlice":2150836866812832620},"usedName":{"valueName":{"identifier":"requestBodyLength"}},"qualification":null},{"reference":{"builtinModule":"Data.Maybe"},"usedName":{"valueName":{"identifier":"maybe"}},"qualification":null},{"reference":{"otherSlice":2778711971517543461},"usedName":{"constructorName":{"identifier":"ChunkedBody"},"constructorTypeName":{"identifier":"RequestBodyLength"}},"qualification":null},{"reference":{"otherSlice":2778711971517543461},"usedName":{"constructorName":{"identifier":"KnownLength"},"constructorTypeName":{"identifier":"RequestBodyLength"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":"."}},"qualification":null},{"reference":{"builtinModule":"GHC.Real"},"usedName":{"valueName":{"identifier":"fromIntegral"}},"qualification":null},{"reference":{"otherSlice":2150836866812832620},"usedName":{"valueName":{"identifier":"requestHeaderHost"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":"<|>"}},"qualification":null},{"reference":{"otherSlice":2150836866812832620},"usedName":{"valueName":{"identifier":"requestHeaderRange"}},"qualification":null},{"reference":{"otherSlice":2150836866812832620},"usedName":{"valueName":{"identifier":"requestHeaderReferer"}},"qualification":null},{"reference":{"otherSlice":2150836866812832620},"usedName":{"valueName":{"identifier":"requestHeaderUserAgent"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"map"}},"qualification":null},{"reference":{"builtinModule":"Control.Arrow"},"usedName":{"valueName":{"identifier":"first"}},"qualification":null},{"reference":{"otherSlice":1775446759656520807},"usedName":{"valueName":{"identifier":"tokenKey"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"constructorName":{"identifier":"Just"},"constructorTypeName":{"identifier":"Maybe"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"constructorName":{"identifier":"Nothing"},"constructorTypeName":{"identifier":"Maybe"}},"qualification":null},{"reference":{"otherSlice":1391677596971574210},"usedName":{"valueName":{"identifier":"tokenHost"}},"qualification":null},{"reference":{"otherSlice":1790361685794662609},"usedName":{"valueName":{"identifier":"getHeaderValue"}},"qualification":null},{"reference":{"otherSlice":3554498519478216771},"usedName":{"valueName":{"identifier":"tokenPath"}},"qualification":null},{"reference":{"builtinModule":"Data.Maybe"},"usedName":{"valueName":{"identifier":"fromJust"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":"$"}},"qualification":null},{"reference":{"otherSlice":5846874903791806427},"usedName":{"valueName":{"identifier":"tokenMethod"}},"qualification":null},{"reference":{"otherSlice":1610787913570767020},"usedName":{"valueName":{"identifier":"tokenAuthority"}},"qualification":null},{"reference":{"otherSlice":4373275415777775615},"usedName":{"valueName":{"identifier":"tokenRange"}},"qualification":null},{"reference":{"otherSlice":2033117528343772000},"usedName":{"valueName":{"identifier":"tokenReferer"}},"qualification":null},{"reference":{"otherSlice":4616131332960899947},"usedName":{"valueName":{"identifier":"tokenUserAgent"}},"qualification":null},{"reference":{"otherSlice":5029659523855270106},"usedName":{"valueName":{"identifier":"break"}},"qualification":"B8"},{"reference":{"builtinModule":"GHC.Classes"},"usedName":{"valueName":{"operator":"=="}},"qualification":null},{"reference":{"otherSlice":7940594825235339734},"usedName":{"valueName":{"identifier":"extractPath"}},"qualification":"H"},{"reference":{"otherSlice":7471038449729235448},"usedName":{"valueName":{"identifier":"settingsNoParsePath"}},"qualification":"S"},{"reference":{"otherSlice":8039605989207552733},"usedName":{"valueName":{"identifier":"hashByteString"}},"qualification":null},{"reference":{"otherSlice":3186964978747758913},"usedName":{"valueName":{"identifier":"toInternalInfo"}},"qualification":null},{"reference":{"otherSlice":27681834806193008},"usedName":{"valueName":{"identifier":"threadHandle"}},"qualification":null},{"reference":{"otherSlice":1407144652902852756},"usedName":{"valueName":{"identifier":"insert"}},"qualification":"Vault"},{"reference":{"otherSlice":3419998213074577296},"usedName":{"valueName":{"identifier":"pauseTimeoutKey"}},"qualification":null},{"reference":{"otherSlice":6043783101314232459},"usedName":{"valueName":{"identifier":"pause"}},"qualification":"Timeout"},{"reference":{"otherSlice":3986913044790034314},"usedName":{"valueName":{"identifier":"getFileInfoKey"}},"qualification":null},{"reference":{"otherSlice":27681834806193008},"usedName":{"valueName":{"identifier":"getFileInfo"}},"qualification":null},{"reference":{"otherSlice":9158184198235912122},"usedName":{"valueName":{"identifier":"getHTTP2DataKey"}},"qualification":null},{"reference":{"builtinModule":"GHC.IORef"},"usedName":{"valueName":{"identifier":"readIORef"}},"qualification":null},{"reference":{"otherSlice":2188192182107604865},"usedName":{"valueName":{"identifier":"setHTTP2DataKey"}},"qualification":null},{"reference":{"builtinModule":"GHC.IORef"},"usedName":{"valueName":{"identifier":"writeIORef"}},"qualification":null},{"reference":{"otherSlice":6865087624343548025},"usedName":{"valueName":{"identifier":"modifyHTTP2DataKey"}},"qualification":null},{"reference":{"builtinModule":"Data.IORef"},"usedName":{"valueName":{"identifier":"modifyIORef'"}},"qualification":null},{"reference":{"otherSlice":4883163009868073685},"usedName":{"valueName":{"identifier":"empty"}},"qualification":"Vault"},{"reference":{"otherSlice":7131233874288028310},"usedName":{"typeName":{"identifier":"InternalInfo1"}},"qualification":null},{"reference":{"otherSlice":7471038449729235448},"usedName":{"typeName":{"identifier":"Settings"}},"qualification":"S"},{"reference":{"otherSlice":2694158817781932873},"usedName":{"typeName":{"identifier":"SockAddr"}},"qualification":null},{"reference":{"builtinModule":"GHC.IORef"},"usedName":{"typeName":{"identifier":"IORef"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"typeName":{"identifier":"Maybe"}},"qualification":null},{"reference":{"otherSlice":6883051797763074494},"usedName":{"typeName":{"identifier":"HTTP2Data"}},"qualification":null},{"reference":{"otherSlice":3541901859045492146},"usedName":{"typeName":{"identifier":"MkReq"}},"qualification":null}],"fragment":["mkRequest' ::\n           InternalInfo1 ->\n             S.Settings -> SockAddr -> IORef (Maybe HTTP2Data) -> MkReq","mkRequest' ii1 settings addr ref (reqths, reqvt) (bodylen, body)\n  = return (req, ii)\n  where !req\n          = Request{requestMethod = colonMethod, httpVersion = http2ver,\n                    rawPathInfo = rawPath, pathInfo = H.decodePathSegments path,\n                    rawQueryString = query, queryString = H.parseQuery query,\n                    requestHeaders = headers, isSecure = True, remoteHost = addr,\n                    requestBody = body, vault = vaultValue,\n                    requestBodyLength =\n                      maybe ChunkedBody (KnownLength . fromIntegral) bodylen,\n                    requestHeaderHost = mHost <|> mAuth, requestHeaderRange = mRange,\n                    requestHeaderReferer = mReferer,\n                    requestHeaderUserAgent = mUserAgent}\n        headers = map (first tokenKey) ths\n          where ths\n                  = case mHost of\n                        Just _ -> reqths\n                        Nothing -> case mAuth of\n                                       Just auth -> (tokenHost, auth) : reqths\n                                       _ -> reqths\n        !mPath = getHeaderValue tokenPath reqvt\n        !colonMethod = fromJust $ getHeaderValue tokenMethod reqvt\n        !mAuth = getHeaderValue tokenAuthority reqvt\n        !mHost = getHeaderValue tokenHost reqvt\n        !mRange = getHeaderValue tokenRange reqvt\n        !mReferer = getHeaderValue tokenReferer reqvt\n        !mUserAgent = getHeaderValue tokenUserAgent reqvt\n        (unparsedPath, query)\n          = B8.break (== '?') $ fromJust (mPath <|> mAuth)\n        !path = H.extractPath unparsedPath\n        !rawPath\n          = if S.settingsNoParsePath settings then unparsedPath else path\n        !h = hashByteString rawPath\n        !ii = toInternalInfo ii1 h\n        !th = threadHandle ii\n        !vaultValue\n          = Vault.insert pauseTimeoutKey (Timeout.pause th) $\n              Vault.insert getFileInfoKey (getFileInfo ii) $\n                Vault.insert getHTTP2DataKey (readIORef ref) $\n                  Vault.insert setHTTP2DataKey (writeIORef ref) $\n                    Vault.insert modifyHTTP2DataKey (modifyIORef' ref) Vault.empty"],"instances":[],"language":{"extensions":["OverloadedStrings","BangPatterns","MultiParamTypeClasses","NondecreasingIndentation","ExplicitForAll","PatternGuards"]}}