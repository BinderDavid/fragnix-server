{"sliceID":3031025638083640169,"uses":[{"reference":{"otherSlice":5611587200607389184},"usedName":{"valueName":{"identifier":"headerLines"}},"qualification":null},{"reference":{"otherSlice":8038958407337734909},"usedName":{"valueName":{"identifier":"parseHeaderLines"}},"qualification":null},{"reference":{"otherSlice":5109204431692857496},"usedName":{"valueName":{"identifier":"indexRequestHeader"}},"qualification":null},{"reference":{"builtinModule":"GHC.Arr"},"usedName":{"valueName":{"operator":"!"}},"qualification":null},{"reference":{"builtinModule":"GHC.Enum"},"usedName":{"valueName":{"identifier":"fromEnum"}},"qualification":null},{"reference":{"otherSlice":3180919271543096407},"usedName":{"constructorName":{"identifier":"ReqExpect"},"constructorTypeName":{"identifier":"RequestHeaderIndex"}},"qualification":null},{"reference":{"otherSlice":3180919271543096407},"usedName":{"constructorName":{"identifier":"ReqContentLength"},"constructorTypeName":{"identifier":"RequestHeaderIndex"}},"qualification":null},{"reference":{"otherSlice":3180919271543096407},"usedName":{"constructorName":{"identifier":"ReqTransferEncoding"},"constructorTypeName":{"identifier":"RequestHeaderIndex"}},"qualification":null},{"reference":{"otherSlice":2318974401853325546},"usedName":{"valueName":{"identifier":"handleExpect"}},"qualification":null},{"reference":{"otherSlice":7471038449729235448},"usedName":{"valueName":{"identifier":"settingsNoParsePath"}},"qualification":null},{"reference":{"otherSlice":8039605989207552733},"usedName":{"valueName":{"identifier":"hashByteString"}},"qualification":null},{"reference":{"otherSlice":3186964978747758913},"usedName":{"valueName":{"identifier":"toInternalInfo"}},"qualification":null},{"reference":{"otherSlice":27681834806193008},"usedName":{"valueName":{"identifier":"threadHandle"}},"qualification":null},{"reference":{"otherSlice":1407144652902852756},"usedName":{"valueName":{"identifier":"insert"}},"qualification":"Vault"},{"reference":{"otherSlice":3419998213074577296},"usedName":{"valueName":{"identifier":"pauseTimeoutKey"}},"qualification":null},{"reference":{"otherSlice":6043783101314232459},"usedName":{"valueName":{"identifier":"pause"}},"qualification":"Timeout"},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":"$"}},"qualification":null},{"reference":{"otherSlice":3986913044790034314},"usedName":{"valueName":{"identifier":"getFileInfoKey"}},"qualification":null},{"reference":{"otherSlice":27681834806193008},"usedName":{"valueName":{"identifier":"getFileInfo"}},"qualification":null},{"reference":{"otherSlice":4883163009868073685},"usedName":{"valueName":{"identifier":"empty"}},"qualification":"Vault"},{"reference":{"otherSlice":4403127788651197975},"usedName":{"valueName":{"identifier":"bodyAndSource"}},"qualification":null},{"reference":{"otherSlice":2586307386679414657},"usedName":{"valueName":{"identifier":"timeoutBody"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"return"}},"qualification":null},{"reference":{"otherSlice":2150836866812832620},"usedName":{"constructorName":{"identifier":"Request"},"constructorTypeName":{"identifier":"Request"}},"qualification":null},{"reference":{"otherSlice":2150836866812832620},"usedName":{"valueName":{"identifier":"requestMethod"}},"qualification":null},{"reference":{"otherSlice":2150836866812832620},"usedName":{"valueName":{"identifier":"httpVersion"}},"qualification":null},{"reference":{"otherSlice":2150836866812832620},"usedName":{"valueName":{"identifier":"pathInfo"}},"qualification":null},{"reference":{"otherSlice":3579314455847880429},"usedName":{"valueName":{"identifier":"decodePathSegments"}},"qualification":"H"},{"reference":{"otherSlice":2150836866812832620},"usedName":{"valueName":{"identifier":"rawPathInfo"}},"qualification":null},{"reference":{"otherSlice":2150836866812832620},"usedName":{"valueName":{"identifier":"rawQueryString"}},"qualification":null},{"reference":{"otherSlice":2150836866812832620},"usedName":{"valueName":{"identifier":"queryString"}},"qualification":null},{"reference":{"otherSlice":3133621383246103626},"usedName":{"valueName":{"identifier":"parseQuery"}},"qualification":"H"},{"reference":{"otherSlice":2150836866812832620},"usedName":{"valueName":{"identifier":"requestHeaders"}},"qualification":null},{"reference":{"otherSlice":2150836866812832620},"usedName":{"valueName":{"identifier":"isSecure"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"constructorName":{"identifier":"False"},"constructorTypeName":{"identifier":"Bool"}},"qualification":null},{"reference":{"otherSlice":2150836866812832620},"usedName":{"valueName":{"identifier":"remoteHost"}},"qualification":null},{"reference":{"otherSlice":2150836866812832620},"usedName":{"valueName":{"identifier":"requestBody"}},"qualification":null},{"reference":{"otherSlice":2150836866812832620},"usedName":{"valueName":{"identifier":"vault"}},"qualification":null},{"reference":{"otherSlice":2150836866812832620},"usedName":{"valueName":{"identifier":"requestBodyLength"}},"qualification":null},{"reference":{"otherSlice":2150836866812832620},"usedName":{"valueName":{"identifier":"requestHeaderHost"}},"qualification":null},{"reference":{"otherSlice":3180919271543096407},"usedName":{"constructorName":{"identifier":"ReqHost"},"constructorTypeName":{"identifier":"RequestHeaderIndex"}},"qualification":null},{"reference":{"otherSlice":2150836866812832620},"usedName":{"valueName":{"identifier":"requestHeaderRange"}},"qualification":null},{"reference":{"otherSlice":3180919271543096407},"usedName":{"constructorName":{"identifier":"ReqRange"},"constructorTypeName":{"identifier":"RequestHeaderIndex"}},"qualification":null},{"reference":{"otherSlice":2150836866812832620},"usedName":{"valueName":{"identifier":"requestHeaderReferer"}},"qualification":null},{"reference":{"otherSlice":3180919271543096407},"usedName":{"constructorName":{"identifier":"ReqReferer"},"constructorTypeName":{"identifier":"RequestHeaderIndex"}},"qualification":null},{"reference":{"otherSlice":2150836866812832620},"usedName":{"valueName":{"identifier":"requestHeaderUserAgent"}},"qualification":null},{"reference":{"otherSlice":3180919271543096407},"usedName":{"constructorName":{"identifier":"ReqUserAgent"},"constructorTypeName":{"identifier":"RequestHeaderIndex"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"Bool"}},"qualification":null},{"reference":{"otherSlice":7471038449729235448},"usedName":{"typeName":{"identifier":"Settings"}},"qualification":null},{"reference":{"otherSlice":2455091088557061440},"usedName":{"typeName":{"identifier":"Connection"}},"qualification":null},{"reference":{"otherSlice":7131233874288028310},"usedName":{"typeName":{"identifier":"InternalInfo1"}},"qualification":null},{"reference":{"otherSlice":2694158817781932873},"usedName":{"typeName":{"identifier":"SockAddr"}},"qualification":null},{"reference":{"otherSlice":3462352128847749526},"usedName":{"typeName":{"identifier":"Source"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"IO"}},"qualification":null},{"reference":{"otherSlice":2150836866812832620},"usedName":{"typeName":{"identifier":"Request"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"typeName":{"identifier":"Maybe"}},"qualification":null},{"reference":{"builtinModule":"GHC.IORef"},"usedName":{"typeName":{"identifier":"IORef"}},"qualification":"I"},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"Int"}},"qualification":null},{"reference":{"otherSlice":7539027878723779009},"usedName":{"typeName":{"identifier":"IndexedHeader"}},"qualification":null},{"reference":{"otherSlice":4942888801223460576},"usedName":{"typeName":{"identifier":"ByteString"}},"qualification":null},{"reference":{"otherSlice":27681834806193008},"usedName":{"typeName":{"identifier":"InternalInfo"}},"qualification":null}],"fragment":["recvRequest ::\n            Bool ->\n              Settings ->\n                Connection ->\n                  InternalInfo1 ->\n                    SockAddr ->\n                      Source ->\n                        IO\n                          (Request, Maybe (I.IORef Int), IndexedHeader, IO ByteString,\n                           InternalInfo)","recvRequest firstRequest settings conn ii1 addr src\n  = do hdrlines <- headerLines firstRequest src\n       (method, unparsedPath, path, query, httpversion,\n        hdr) <- parseHeaderLines hdrlines\n       let idxhdr = indexRequestHeader hdr\n           expect = idxhdr ! fromEnum ReqExpect\n           cl = idxhdr ! fromEnum ReqContentLength\n           te = idxhdr ! fromEnum ReqTransferEncoding\n           handle100Continue = handleExpect conn httpversion expect\n           rawPath\n             = if settingsNoParsePath settings then unparsedPath else path\n           h = hashByteString rawPath\n           ii = toInternalInfo ii1 h\n           th = threadHandle ii\n           vaultValue\n             = Vault.insert pauseTimeoutKey (Timeout.pause th) $\n                 Vault.insert getFileInfoKey (getFileInfo ii) Vault.empty\n       (rbody, remainingRef, bodyLength) <- bodyAndSource src cl te\n       rbody' <- timeoutBody remainingRef th rbody handle100Continue\n       rbodyFlush <- timeoutBody remainingRef th rbody (return ())\n       let req\n             = Request{requestMethod = method, httpVersion = httpversion,\n                       pathInfo = H.decodePathSegments path, rawPathInfo = rawPath,\n                       rawQueryString = query, queryString = H.parseQuery query,\n                       requestHeaders = hdr, isSecure = False, remoteHost = addr,\n                       requestBody = rbody', vault = vaultValue,\n                       requestBodyLength = bodyLength,\n                       requestHeaderHost = idxhdr ! fromEnum ReqHost,\n                       requestHeaderRange = idxhdr ! fromEnum ReqRange,\n                       requestHeaderReferer = idxhdr ! fromEnum ReqReferer,\n                       requestHeaderUserAgent = idxhdr ! fromEnum ReqUserAgent}\n       return (req, remainingRef, idxhdr, rbodyFlush, ii)"],"instances":[],"language":{"extensions":["BangPatterns","OverloadedStrings","DeriveDataTypeable","MultiParamTypeClasses","NondecreasingIndentation","ExplicitForAll","PatternGuards"]}}