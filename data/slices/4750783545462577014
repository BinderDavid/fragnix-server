{"sliceID":4750783545462577014,"uses":[{"reference":{"otherSlice":5353085893229343222},"usedName":{"constructorName":{"identifier":"PriorityTree"},"constructorTypeName":{"identifier":"PriorityTree"}},"qualification":null},{"reference":{"builtinModule":"GHC.Classes"},"usedName":{"valueName":{"operator":"=="}},"qualification":null},{"reference":{"builtinModule":"GHC.Conc.Sync"},"usedName":{"valueName":{"identifier":"atomically"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"operator":"$"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"otherwise"}},"qualification":null},{"reference":{"builtinModule":"GHC.Conc.Sync"},"usedName":{"valueName":{"identifier":"readTVar"}},"qualification":null},{"reference":{"otherSlice":6396109612671124023},"usedName":{"valueName":{"identifier":"lookup"}},"qualification":"Map"},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"constructorName":{"identifier":"Nothing"},"constructorTypeName":{"identifier":"Maybe"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"valueName":{"identifier":"return"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"constructorName":{"identifier":"Just"},"constructorTypeName":{"identifier":"Maybe"}},"qualification":null},{"reference":{"otherSlice":1474726555369894793},"usedName":{"valueName":{"identifier":"dependency"}},"qualification":"Q"},{"reference":{"otherSlice":6864563485803814979},"usedName":{"valueName":{"identifier":"delete"}},"qualification":"Q"},{"reference":{"otherSlice":5783778720325805178},"usedName":{"constructorName":{"identifier":"Child"},"constructorTypeName":{"identifier":"Element"}},"qualification":null},{"reference":{"otherSlice":5783778720325805178},"usedName":{"constructorName":{"identifier":"Parent"},"constructorTypeName":{"identifier":"Element"}},"qualification":null},{"reference":{"otherSlice":5353085893229343222},"usedName":{"typeName":{"identifier":"PriorityTree"}},"qualification":null},{"reference":{"otherSlice":606063981647933956},"usedName":{"typeName":{"identifier":"StreamId"}},"qualification":null},{"reference":{"otherSlice":1474726555369894793},"usedName":{"typeName":{"identifier":"Precedence"}},"qualification":null},{"reference":{"builtinModule":"GHC.Types"},"usedName":{"typeName":{"identifier":"IO"}},"qualification":null},{"reference":{"builtinModule":"GHC.Base"},"usedName":{"typeName":{"identifier":"Maybe"}},"qualification":null}],"fragment":["delete :: PriorityTree a -> StreamId -> Precedence -> IO (Maybe a)","delete (PriorityTree var q0) sid p\n  | pid == 0 = atomically $ del q0\n  | otherwise =\n    atomically $\n      do m <- readTVar var\n         case Map.lookup pid m of\n             Nothing -> return Nothing\n             Just (q, _) -> del q\n  where pid = Q.dependency p\n        del q\n          = do mel <- Q.delete sid q\n               case mel of\n                   Nothing -> return Nothing\n                   Just el -> case el of\n                                  Child x -> return $ Just x\n                                  Parent _ -> return Nothing"],"instances":[],"language":{"extensions":["BangPatterns","MultiParamTypeClasses","NondecreasingIndentation","ExplicitForAll","PatternGuards"]}}